"use strict";const completeLegend=document.querySelector(".js_complete_legend"),designLegend=document.querySelector(".js_design_legend"),shareLegend=document.querySelector(".js_share_legend"),completeForm=document.querySelector(".js_complete_form"),designForm=document.querySelector(".js_design_form"),shareForm=document.querySelector(".js_share_form"),arrow=document.querySelectorAll(".js_arrow"),stylePreview=document.querySelector(".js_style_preview"),style_001=document.querySelector("#style_001"),style_002=document.querySelector("#style_002"),style_003=document.querySelector("#style_003"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function openForm(e){"completeLegend"===e&&(completeForm.classList.toggle("collapsed"),designForm.classList.add("collapsed"),shareForm.classList.add("collapsed")),"designLegend"===e&&(designForm.classList.toggle("collapsed"),completeForm.classList.add("collapsed"),shareForm.classList.add("collapsed")),"shareLegend"===e&&(shareForm.classList.toggle("collapsed"),designForm.classList.add("collapsed"),completeForm.classList.add("collapsed"))}function rotateArrow(e){"completeLegend"===e&&(arrow[1].classList.toggle("toggle_arrow"),arrow[0].classList.add("toggle_arrow"),arrow[2].classList.add("toggle_arrow")),"designLegend"===e&&(arrow[0].classList.toggle("toggle_arrow"),arrow[1].classList.add("toggle_arrow"),arrow[2].classList.add("toggle_arrow")),"shareLegend"===e&&(arrow[2].classList.toggle("toggle_arrow"),arrow[1].classList.add("toggle_arrow"),arrow[0].classList.add("toggle_arrow"))}function handleCollapsed(e){e.preventDefault();const t=e.currentTarget.id;rotateArrow(t),openForm(t)}function changeColorStyle(e){const t=e.currentTarget.id;"style_001"===t&&(stylePreview.classList.add("style_001"),stylePreview.classList.remove("style_002"),stylePreview.classList.remove("style_003")),"style_002"===t&&(stylePreview.classList.add("style_002"),stylePreview.classList.remove("style_001"),stylePreview.classList.remove("style_003")),"style_003"===t&&(stylePreview.classList.add("style_003"),stylePreview.classList.remove("style_002"),stylePreview.classList.remove("style_001"))}completeLegend.addEventListener("click",handleCollapsed),designLegend.addEventListener("click",handleCollapsed),shareLegend.addEventListener("click",handleCollapsed),style_001.addEventListener("click",changeColorStyle),style_002.addEventListener("click",changeColorStyle),style_003.addEventListener("click",changeColorStyle);let data={palette:1,name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:""};const inputsForm=document.querySelector(".js_allInputs"),emailIcon=document.querySelector(".js_icon_email"),phoneIcon=document.querySelector(".js_icon_phone"),linkedinIcon=document.querySelector(".js_icon_linkedin"),githubIcon=document.querySelector(".js_icon_github");function handleData(e){const t=e.target;"name"===t.id?data.name=t.value:"job"===t.id?data.job=t.value:"email"===t.id?data.email=t.value:"phone"===t.id?data.phone=t.value:"linkedin"===t.id?data.linkedin=t.value:"github"===t.id?data.github=t.value:"photo"===t.id&&(data.photo=t.value),previewUser()}const realTimeName=document.querySelector(".js_name"),realTimeOcupation=document.querySelector(".js_ocupation");function previewUser(){realTimeName.innerHTML=data.name,realTimeOcupation.innerHTML=data.job,""===data.name?realTimeName.innerHTML="Nombre y Apellidos":realTimeName.innerHTML=data.name,""===data.job?realTimeOcupation.innerHTML="Profesión":realTimeOcupation.innerHTML=data.job,emailIcon.href="mailto:"+data.email,phoneIcon.href="tel:"+data.phone,linkedinIcon.href=data.linkedin,githubIcon.href=data.github}inputsForm.addEventListener("keyup",handleData);const btnReset=document.querySelector(".js-reset-btn"),inputName=document.querySelector(".js_name_input"),inputJob=document.querySelector(".js_ocupation_input"),inputEmail=document.querySelector(".js_input_email"),inputPhone=document.querySelector(".js_input_phone"),inputLinkedin=document.querySelector(".js_input_linkedin"),inputGithub=document.querySelector(".js_input_github");function resetPreview(){data.palette=1,data.name="",data.job="",data.email="",data.phone="",data.linkedin="",data.github="",data.photo="",inputName.value="",inputJob.value="",inputEmail.value="",inputPhone.value="",inputLinkedin.value="",inputGithub.value="",realTimeName.innerHTML="Nombre y Apellidos",realTimeOcupation.innerHTML="Profesión"}function handleReset(e){e.preventDefault(),resetPreview(),profileImage.style.backgroundImage="",profilePreview.style.backgroundImage=""}btnReset.addEventListener("click",handleReset);const name=document.getElementById("name"),job=document.getElementById("job"),email=document.getElementById("email"),phone=document.getElementById("phone"),linkedin=document.getElementById("linkedin"),github=document.getElementById("github"),listInputs=document.querySelectorAll(".js__inputs"),form=document.querySelector(".js__form");function validationForm(){listInputs.forEach(e=>{e.lastElementChild.innerHTML=""}),name.value.length<1||""===name.value.trim()?(name.classList.add("wrong"),name.classList.remove("right"),errorMessage("name","Por favor ingresa un nombre valido")):(name.classList.remove("wrong"),name.classList.add("right")),job.value.length<1||""===job.value.trim()?(job.classList.add("wrong"),job.classList.remove("right"),errorMessage("job","Por favor ingresa un puesto valido")):(job.classList.remove("wrong"),job.classList.add("right")),email.value.length<1||""===email.value.trim()||!/^[-\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\.){1,125}[A-Z]{2,63}$/i.test(email.value)?(email.classList.add("wrong"),email.classList.remove("right"),errorMessage("email","Por favor ingresa un email valido")):(email.classList.remove("wrong"),email.classList.add("right")),phone.value.length<9||""===phone.value.trim()||isNaN(phone.value)?(phone.classList.add("wrong"),phone.classList.remove("right"),errorMessage("phone","Por favor ingresa un teléfono valido")):(phone.classList.remove("wrong"),phone.classList.add("right")),linkedin.value.length<1||""===linkedin.value.trim()?(linkedin.classList.add("wrong"),linkedin.classList.remove("right"),errorMessage("linkedin","Por favor ingresa una cuenta valida")):(linkedin.classList.remove("wrong"),linkedin.classList.add("right")),github.value.length<1||""===github.value.trim()?(github.classList.add("wrong"),github.classList.remove("right"),errorMessage("github","Por favor ingresa una cuenta valida")):(github.classList.remove("wrong"),github.classList.add("right"))}function errorMessage(e,t){document.querySelector("."+e).lastElementChild.innerHTML=t}form.addEventListener("keyup",e=>{e.preventDefault(),validationForm()});const createButton=document.querySelector(".js_create_button"),urlTwitter=document.querySelector(".js_url"),buttonTwitter=document.querySelector(".share__button--in"),feedBack=document.querySelector(".js_share__title--done"),buttonOrange=document.querySelector(".js_buttonOrange");function handleClickCreateButton(e){e.preventDefault(),setLocalStorage(),fetch("https://awesome-profile-cards.herokuapp.com/card",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)}).then(e=>e.json()).then(e=>{!1===e.success?feedBack.innerHTML="Debe faltar algún dato del formulario...":(buttonOrange.classList.add("buttonOrange"),console.log("001"),feedBack.innerHTML="Aquí tienes tu tarjeta:",console.log("002"),urlTwitter.innerHTML=e.cardURL,urlTwitter.href=e.cardURL)})}function shareOnTwitter(e){e.preventDefault();let t="https://twitter.com/intent/tweet?text=He%20creado%20una%20tarjeta%20profesional.%20¡Conóceme!%20&url="+urlTwitter.href;window.location.href=t}function setLocalStorage(){console.log("Entra en setLocalStorage 1");const e=JSON.stringify(data);localStorage.setItem("localData",e),console.log("Entra en setLocalStorage 2",e)}function getLocalStorage(){console.log("Entra en getLocalStorage",getLocalStorage);let e=localStorage.getItem("localData");if(null===e)e=[];else{const t=JSON.parse(e);data=t,inputName.value=data.name,inputJob.value=data.job,inputEmail.value=data.email,inputPhone.value=data.phone,inputLinkedin.value=data.linkedin,inputGithub.value=data.github,profileImage.style.backgroundImage=`url(${data.photo})`,profilePreview.style.backgroundImage=`url(${data.photo})`,realTimeName.innerHTML=data.name,realTimeOcupation.innerHTML=data.job,emailIcon.href="mailto:"+data.email,phoneIcon.href="tel:"+data.phone,linkedinIcon.href=data.linkedin,githubIcon.href=data.github}}createButton.addEventListener("click",handleClickCreateButton),buttonTwitter.addEventListener("click",shareOnTwitter),getLocalStorage();const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,data.photo=fr.result}fileField.addEventListener("change",getImage);